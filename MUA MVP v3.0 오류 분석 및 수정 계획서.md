# MUA MVP v3.0 ì˜¤ë¥˜ ë¶„ì„ ë° ìˆ˜ì • ê³„íšì„œ

## ğŸ“ í”„ë¡œì íŠ¸ ì •ë³´
- **ì €ì¥ì†Œ**: https://github.com/dkdla93/mua_mvp_v3.0
- **í”„ë¡œì íŠ¸ëª…**: ì¸í…Œë¦¬ì–´ ì°©ê³µë„ì„œ ìë™ ìƒì„± ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
- **ë°°í¬ í™˜ê²½**: Vercel (ì •ì  ì‚¬ì´íŠ¸)
- **ê¸°ìˆ  ìŠ¤íƒ**: Vanilla JavaScript (ES5), CSS3, SheetJS, PptxGenJS

## ğŸ” ì „ë°˜ì ì¸ í”„ë¡œì íŠ¸ ë¶„ì„

### í”„ë¡œì íŠ¸ êµ¬ì¡°
1. **1ë‹¨ê³„ - íŒŒì¼ ì—…ë¡œë“œ**: ì—‘ì…€ ìì¬í‘œ(.xlsx, .xls), ë¯¸ë‹ˆë§µ ì´ë¯¸ì§€, ì¥ë©´ ì´ë¯¸ì§€ ì—…ë¡œë“œ
2. **2ë‹¨ê³„ - ê³µì • ê´€ë¦¬**: ê³µì • ì¶”ê°€/ì‚­ì œ/ê´€ë¦¬ (ìµœëŒ€ 10ê°œ), ì¥ë©´ë³„ ê³µì • ì„ íƒ
3. **3ë‹¨ê³„ - ë“œë˜ê·¸ì•¤ë“œë¡­**: ìì¬ ë°°ì¹˜, ë²ˆí˜¸ ë°°ì§€ ì‹œìŠ¤í…œ, ì¢Œí‘œ ì‹œìŠ¤í…œ
4. **4ë‹¨ê³„ - PPT ìƒì„±**: PowerPoint ìë™ ìƒì„± (ë¯¸êµ¬í˜„)

### í˜„ì¬ ìƒíƒœ
- 1-3ë‹¨ê³„ êµ¬í˜„ ì™„ë£Œ (í‰ê·  8.7/10 í‰ì )
- 4ë‹¨ê³„ PPT ìƒì„± ê¸°ëŠ¥ ë¯¸êµ¬í˜„
- Vercel ë°°í¬ ì‹œ ë‹¤ìˆ˜ì˜ ì˜¤ë¥˜ ë°œìƒ

## âš ï¸ ê²€ì¶œëœ ì£¼ìš” ì˜¤ë¥˜ ë¦¬ìŠ¤íŠ¸

### 1. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë¬¸ì œ (Critical)
- **ì¦ìƒ**: ì¥ì‹œê°„ ì‚¬ìš© ì‹œ ë¸Œë¼ìš°ì € ì„±ëŠ¥ ì €í•˜, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì§€ì† ì¦ê°€
- **ì›ì¸**: 
  - ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì œê±°ë˜ì§€ ì•Šê³  ê³„ì† ëˆ„ì 
  - DOM ìš”ì†Œ ì°¸ì¡°ê°€ ë©”ëª¨ë¦¬ì— ë‚¨ì•„ìˆìŒ
  - ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œë˜ì§€ ì•ŠìŒ

### 2. íŒŒì¼ ì—…ë¡œë“œ ì˜¤ë¥˜ (Critical)
- **ì¦ìƒ**: íŠ¹ì • ì—‘ì…€ íŒŒì¼ì´ë‚˜ ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨
- **ì›ì¸**:
  - SheetJS ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ í˜¸í™˜ì„± ë¬¸ì œ
  - ArrayBuffer ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ì˜¤ë²„í”Œë¡œìš°
  - MIME íƒ€ì… ê²€ì¦ ëˆ„ë½
  - íŒŒì¼ í¬ê¸° ì œí•œ ì—†ìŒ
  - ì—ëŸ¬ ì²˜ë¦¬ ë¯¸ë¹„

### 3. ë“œë˜ê·¸ì•¤ë“œë¡­ ì¢Œí‘œ ì‹œìŠ¤í…œ ì˜¤ë¥˜ (High)
- **ì¦ìƒ**: ë°˜ì‘í˜• í™˜ê²½ì—ì„œ ìì¬ ìœ„ì¹˜ê°€ í‹€ì–´ì§, ë¸Œë¼ìš°ì € í¬ê¸° ë³€ê²½ ì‹œ ì˜¤ì‘ë™
- **ì›ì¸**:
  - `getBoundingClientRect()` ê°’ ìºì‹±ìœ¼ë¡œ ì¸í•œ ì˜¤ì°¨
  - Transform ì†ì„±ê³¼ ì‹¤ì œ ì¢Œí‘œ ê°„ ë¶ˆì¼ì¹˜
  - Viewport ë³€ê²½ ì´ë²¤íŠ¸ ë¯¸ì²˜ë¦¬
  - ì •ê·œí™”ëœ ì¢Œí‘œì™€ í”½ì…€ ì¢Œí‘œ ê°„ ë³€í™˜ ì˜¤ë¥˜

### 4. ìƒíƒœ ê´€ë¦¬ ë¶ˆì¼ì¹˜ (High)
- **ì¦ìƒ**: ê³µì • ì „í™˜ ì‹œ ë°ì´í„° ì†ì‹¤, ìƒˆë¡œê³ ì¹¨ ì‹œ ëª¨ë“  ë°ì´í„° ì´ˆê¸°í™”
- **ì›ì¸**:
  - ì „ì—­ ìƒíƒœì™€ ë¡œì»¬ ìƒíƒœ ê°„ ë™ê¸°í™” ë¬¸ì œ
  - ê³µì • ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ì—ë§Œ ì €ì¥ë˜ì–´ ì˜ì†ì„± ì—†ìŒ
  - íƒ­ ì „í™˜ ì‹œ ì´ì „ ìƒíƒœ ë³µì› ì‹¤íŒ¨
  - ë°ì´í„° ê²©ë¦¬ ë¡œì§ ì˜¤ë¥˜

### 5. ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ë¬¸ì œ (Medium)
- **ì¦ìƒ**: êµ¬í˜• ë¸Œë¼ìš°ì €(IE11, êµ¬ë²„ì „ Safari)ì—ì„œ ì‘ë™ ë¶ˆê°€
- **ì›ì¸**:
  - ES6+ ë¬¸ë²• ì‚¬ìš© (`Object.assign()`, `Array.from()`, Arrow functions ë“±)
  - Promise ì§€ì› ì—†ëŠ” ë¸Œë¼ìš°ì € ëŒ€ì‘ ë¶€ì¬
  - CSS Grid/Flexbox í´ë°± ì—†ìŒ
  - Polyfill ë¯¸ì ìš©

### 6. Vercel ë°°í¬ í™˜ê²½ íŠ¹í™” ì˜¤ë¥˜ (High)
- **ì¦ìƒ**: ë¡œì»¬ì—ì„œëŠ” ì‘ë™í•˜ë‚˜ ë°°í¬ í›„ ë¦¬ì†ŒìŠ¤ ë¡œë”© ì‹¤íŒ¨
- **ì›ì¸**:
  - `vercel.json` ì„¤ì • ëˆ„ë½ ë˜ëŠ” ì˜¤ë¥˜
  - ì •ì  ìì‚° ê²½ë¡œê°€ ì ˆëŒ€ê²½ë¡œë¡œ í•˜ë“œì½”ë”©ë¨
  - í™˜ê²½ë³€ìˆ˜ ë¯¸ì„¤ì •
  - CORS ì •ì±… ìœ„ë°˜
  - ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ë¯¸êµ¬ì„±

## ğŸ“‹ ì˜¤ë¥˜ë³„ ìƒì„¸ ì›ì¸ ë¶„ì„

### 1. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìƒì„¸ ë¶„ì„
```javascript
// í˜„ì¬ ë¬¸ì œê°€ ë˜ëŠ” ì½”ë“œ íŒ¨í„´
element.addEventListener('click', handler);
// ì»´í¬ë„ŒíŠ¸ ì œê±° ì‹œ ë¦¬ìŠ¤ë„ˆ ì œê±° ì½”ë“œ ì—†ìŒ

// ë¬¸ì œì :
// - ë™ì ìœ¼ë¡œ ìƒì„±ëœ DOM ìš”ì†Œì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì œê±°ë˜ì§€ ì•ŠìŒ
// - í´ë¡œì €ë¡œ ì¸í•œ ë©”ëª¨ë¦¬ ì°¸ì¡° ìœ ì§€
// - ì´ë¯¸ì§€ ê°ì²´ê°€ null ì²˜ë¦¬ë˜ì§€ ì•ŠìŒ
```

### 2. íŒŒì¼ ì—…ë¡œë“œ ì˜¤ë¥˜ ìƒì„¸ ë¶„ì„
```javascript
// í˜„ì¬ ë¬¸ì œê°€ ë˜ëŠ” ì½”ë“œ
reader.readAsArrayBuffer(file); // ëŒ€ìš©ëŸ‰ íŒŒì¼ ì‹œ ë©”ëª¨ë¦¬ ë¶€ì¡±
// ì—ëŸ¬ ì²˜ë¦¬ ì—†ìŒ

// ë¬¸ì œì :
// - íŒŒì¼ í¬ê¸° ì²´í¬ ì—†ì´ ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œ
// - íŒŒì¼ í˜•ì‹ ê²€ì¦ ì—†ìŒ
// - ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ ì—†ìŒ
// - ì§„í–‰ë¥  í‘œì‹œê°€ ì‹¤ì œ ì²˜ë¦¬ì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ
```

### 3. ì¢Œí‘œ ì‹œìŠ¤í…œ ë¬¸ì œ ë¶„ì„
```javascript
// í˜„ì¬ ë¬¸ì œê°€ ë˜ëŠ” ì½”ë“œ
const rect = element.getBoundingClientRect();
// ì´ ê°’ì„ ìºì‹±í•˜ì—¬ ì‚¬ìš© -> ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì˜¤ì°¨ ë°œìƒ

// ë¬¸ì œì :
// - ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ ë¯¸ì²˜ë¦¬
// - ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ê³ ë ¤í•˜ì§€ ì•ŠìŒ
// - ë¶€ëª¨ ìš”ì†Œì˜ transform ì˜í–¥ ë¯¸ê³ ë ¤
```

### 4. ìƒíƒœ ê´€ë¦¬ ë¬¸ì œ ë¶„ì„
```javascript
// í˜„ì¬ ë¬¸ì œê°€ ë˜ëŠ” íŒ¨í„´
let globalState = {}; // ì „ì—­ ë³€ìˆ˜ë¡œ ìƒíƒœ ê´€ë¦¬
// ìƒˆë¡œê³ ì¹¨ ì‹œ ëª¨ë“  ë°ì´í„° ì†ì‹¤

// ë¬¸ì œì :
// - localStorage ë¯¸í™œìš©
// - ìƒíƒœ ë³€ê²½ ì¶”ì  ì‹œìŠ¤í…œ ì—†ìŒ
// - Undo/Redo ê¸°ëŠ¥ ë¶ˆê°€ëŠ¥í•œ êµ¬ì¡°
```

## ğŸ› ï¸ ì˜¤ë¥˜ í•´ê²° ê³„íš

### Phase 1: ê¸´ê¸‰ ìˆ˜ì • (Critical Fixes) - P0 ìš°ì„ ìˆœìœ„

#### 1.1 ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í•´ê²°
```javascript
// í•´ê²° ë°©ì•ˆ: ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ê´€ë¦¬ í´ë˜ìŠ¤ êµ¬í˜„
class EventManager {
  constructor() {
    this.listeners = new Map();
  }
  
  addListener(element, event, handler) {
    if (!this.listeners.has(element)) {
      this.listeners.set(element, []);
    }
    element.addEventListener(event, handler);
    this.listeners.get(element).push({ event, handler });
  }
  
  removeAllListeners() {
    this.listeners.forEach((handlers, element) => {
      handlers.forEach(({ event, handler }) => {
        element.removeEventListener(event, handler);
      });
    });
    this.listeners.clear();
  }
  
  removeListenersForElement(element) {
    if (this.listeners.has(element)) {
      const handlers = this.listeners.get(element);
      handlers.forEach(({ event, handler }) => {
        element.removeEventListener(event, handler);
      });
      this.listeners.delete(element);
    }
  }
}

// ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ í•´ì œ
function cleanupImages() {
  images.forEach(img => {
    img.src = ''; // ì´ë¯¸ì§€ ì†ŒìŠ¤ ì œê±°
    img = null;   // ì°¸ì¡° ì œê±°
  });
  images = [];
}
```

#### 1.2 íŒŒì¼ ì—…ë¡œë“œ ì•ˆì •í™”
```javascript
// í•´ê²° ë°©ì•ˆ: ê°•í™”ëœ íŒŒì¼ ì²˜ë¦¬ ì‹œìŠ¤í…œ
const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB

async function validateAndProcessFile(file) {
  // 1. MIME íƒ€ì… ê²€ì¦
  const validTypes = {
    excel: ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],
    image: ['image/jpeg', 'image/png', 'image/gif', 'image/webp']
  };
  
  // 2. íŒŒì¼ í¬ê¸° ê²€ì¦
  if (file.size > MAX_FILE_SIZE) {
    throw new Error(`íŒŒì¼ í¬ê¸°ê°€ ${MAX_FILE_SIZE / 1024 / 1024}MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.`);
  }
  
  // 3. ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬
  return await processInChunks(file);
}

async function processInChunks(file) {
  const CHUNK_SIZE = 1024 * 1024; // 1MB chunks
  const chunks = Math.ceil(file.size / CHUNK_SIZE);
  const result = [];
  
  for (let i = 0; i < chunks; i++) {
    const start = i * CHUNK_SIZE;
    const end = Math.min(start + CHUNK_SIZE, file.size);
    const chunk = file.slice(start, end);
    
    // ì²­í¬ ì²˜ë¦¬
    const processed = await processChunk(chunk);
    result.push(processed);
    
    // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
    updateProgress((i + 1) / chunks * 100);
  }
  
  return result;
}

// ì—ëŸ¬ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜
async function uploadWithRetry(file, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await validateAndProcessFile(file);
    } catch (error) {
      console.error(`Upload attempt ${i + 1} failed:`, error);
      if (i === maxRetries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1))); // ì§€ìˆ˜ ë°±ì˜¤í”„
    }
  }
}
```

### Phase 2: í•µì‹¬ ê¸°ëŠ¥ ìˆ˜ì • (Core Fixes) - P1 ìš°ì„ ìˆœìœ„

#### 2.1 ë°˜ì‘í˜• ì¢Œí‘œ ì‹œìŠ¤í…œ êµ¬í˜„
```javascript
// í•´ê²° ë°©ì•ˆ: ì •ê·œí™”ëœ ì¢Œí‘œ ì‹œìŠ¤í…œ
class ResponsiveCoordinateSystem {
  constructor(container) {
    this.container = container;
    this.setupResizeObserver();
    this.updateDimensions();
  }
  
  setupResizeObserver() {
    this.resizeObserver = new ResizeObserver(() => {
      this.updateDimensions();
      this.recalculateAllPositions();
    });
    this.resizeObserver.observe(this.container);
  }
  
  updateDimensions() {
    const rect = this.container.getBoundingClientRect();
    this.width = rect.width;
    this.height = rect.height;
  }
  
  // í”½ì…€ ì¢Œí‘œë¥¼ 0-1 ë²”ìœ„ë¡œ ì •ê·œí™”
  normalizeCoordinates(x, y) {
    return {
      normalX: x / this.width,
      normalY: y / this.height
    };
  }
  
  // ì •ê·œí™”ëœ ì¢Œí‘œë¥¼ í”½ì…€ë¡œ ë³€í™˜
  denormalizeCoordinates(normalX, normalY) {
    return {
      x: normalX * this.width,
      y: normalY * this.height
    };
  }
  
  recalculateAllPositions() {
    // ëª¨ë“  ë°°ì¹˜ëœ ìš”ì†Œì˜ ìœ„ì¹˜ ì¬ê³„ì‚°
    document.querySelectorAll('.placed-item').forEach(item => {
      const normalX = parseFloat(item.dataset.normalX);
      const normalY = parseFloat(item.dataset.normalY);
      const { x, y } = this.denormalizeCoordinates(normalX, normalY);
      item.style.left = `${x}px`;
      item.style.top = `${y}px`;
    });
  }
  
  destroy() {
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
    }
  }
}
```

#### 2.2 ì¤‘ì•™ì§‘ì¤‘ì‹ ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ
```javascript
// í•´ê²° ë°©ì•ˆ: ìƒíƒœ ê´€ë¦¬ì êµ¬í˜„
class StateManager {
  constructor() {
    this.state = this.loadFromLocalStorage() || this.getInitialState();
    this.subscribers = new Set();
    this.history = [];
    this.historyIndex = -1;
    
    // ìë™ ì €ì¥ ì„¤ì • (ë””ë°”ìš´ì‹±)
    this.autoSave = this.debounce(() => {
      this.saveToLocalStorage();
    }, 1000);
  }
  
  getInitialState() {
    return {
      files: {
        excel: null,
        minimap: null,
        scenes: []
      },
      processes: [],
      placements: {},
      currentProcess: null,
      currentScene: null
    };
  }
  
  updateState(path, value, saveToHistory = true) {
    // ì´ì „ ìƒíƒœ ì €ì¥ (Undo ê¸°ëŠ¥ìš©)
    if (saveToHistory) {
      this.saveHistory();
    }
    
    // ì¤‘ì²© ê°ì²´ ê²½ë¡œ ì²˜ë¦¬ (ì˜ˆ: 'files.excel')
    const keys = path.split('.');
    let current = this.state;
    
    for (let i = 0; i < keys.length - 1; i++) {
      if (!current[keys[i]]) {
        current[keys[i]] = {};
      }
      current = current[keys[i]];
    }
    
    current[keys[keys.length - 1]] = value;
    
    // êµ¬ë…ìë“¤ì—ê²Œ ì•Œë¦¼
    this.notifySubscribers(path, value);
    
    // ìë™ ì €ì¥
    this.autoSave();
  }
  
  subscribe(callback) {
    this.subscribers.add(callback);
    return () => this.subscribers.delete(callback);
  }
  
  notifySubscribers(path, value) {
    this.subscribers.forEach(callback => {
      callback({ path, value, state: this.state });
    });
  }
  
  saveToLocalStorage() {
    try {
      // ì´ë¯¸ì§€ ë°ì´í„°ëŠ” ë³„ë„ ì²˜ë¦¬ (ìš©ëŸ‰ ë¬¸ì œ)
      const stateToSave = {
        ...this.state,
        files: {
          ...this.state.files,
          minimap: this.state.files.minimap ? 'stored' : null,
          scenes: this.state.files.scenes.map(() => 'stored')
        }
      };
      localStorage.setItem('mua_mvp_state', JSON.stringify(stateToSave));
    } catch (e) {
      console.error('Failed to save state:', e);
      // ìš©ëŸ‰ ì´ˆê³¼ ì‹œ ì˜¤ë˜ëœ ë°ì´í„° ì •ë¦¬
      this.cleanupOldData();
    }
  }
  
  loadFromLocalStorage() {
    try {
      const saved = localStorage.getItem('mua_mvp_state');
      return saved ? JSON.parse(saved) : null;
    } catch (e) {
      console.error('Failed to load state:', e);
      return null;
    }
  }
  
  saveHistory() {
    // í˜„ì¬ ì¸ë±ìŠ¤ ì´í›„ì˜ íˆìŠ¤í† ë¦¬ ì œê±°
    this.history = this.history.slice(0, this.historyIndex + 1);
    
    // ìƒˆ ìƒíƒœ ì¶”ê°€
    this.history.push(JSON.stringify(this.state));
    this.historyIndex++;
    
    // íˆìŠ¤í† ë¦¬ í¬ê¸° ì œí•œ (ë©”ëª¨ë¦¬ ê´€ë¦¬)
    const MAX_HISTORY = 50;
    if (this.history.length > MAX_HISTORY) {
      this.history = this.history.slice(-MAX_HISTORY);
      this.historyIndex = this.history.length - 1;
    }
  }
  
  undo() {
    if (this.historyIndex > 0) {
      this.historyIndex--;
      this.state = JSON.parse(this.history[this.historyIndex]);
      this.notifySubscribers('undo', this.state);
    }
  }
  
  redo() {
    if (this.historyIndex < this.history.length - 1) {
      this.historyIndex++;
      this.state = JSON.parse(this.history[this.historyIndex]);
      this.notifySubscribers('redo', this.state);
    }
  }
  
  debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
  
  cleanupOldData() {
    // localStorage ìš©ëŸ‰ ì´ˆê³¼ ì‹œ ì˜¤ë˜ëœ ë°ì´í„° ì •ë¦¬
    const keys = Object.keys(localStorage);
    keys.forEach(key => {
      if (key.startsWith('mua_mvp_old_')) {
        localStorage.removeItem(key);
      }
    });
  }
}
```

### Phase 3: í˜¸í™˜ì„± ë° ìµœì í™” (Compatibility & Optimization) - P2 ìš°ì„ ìˆœìœ„

#### 3.1 Polyfill ë° íŠ¸ëœìŠ¤íŒŒì¼ë§ ì„¤ì •
```javascript
// polyfills.js - í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— ì¶”ê°€
// Object.assign polyfill
if (typeof Object.assign !== 'function') {
  Object.defineProperty(Object, "assign", {
    value: function assign(target) {
      'use strict';
      if (target == null) {
        throw new TypeError('Cannot convert undefined or null to object');
      }
      var to = Object(target);
      for (var index = 1; index < arguments.length; index++) {
        var nextSource = arguments[index];
        if (nextSource != null) {
          for (var key in nextSource) {
            if (Object.prototype.hasOwnProperty.call(nextSource, key)) {
              to[key] = nextSource[key];
            }
          }
        }
      }
      return to;
    },
    writable: true,
    configurable: true
  });
}

// Array.from polyfill
if (!Array.from) {
  Array.from = function(object) {
    'use strict';
    return [].slice.call(object);
  };
}

// Promise polyfill (core-js ì‚¬ìš© ê¶Œì¥)
if (!window.Promise) {
  document.write('<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"><\/script>');
}

// ResizeObserver polyfill
if (!window.ResizeObserver) {
  document.write('<script src="https://cdn.jsdelivr.net/npm/resize-observer-polyfill@1.5.1/dist/ResizeObserver.min.js"><\/script>');
}
```

```json
// babel.config.json
{
  "presets": [
    ["@babel/preset-env", {
      "targets": {
        "browsers": ["> 0.25%", "not dead", "IE 11"]
      },
      "useBuiltIns": "usage",
      "corejs": 3
    }]
  ],
  "plugins": [
    "@babel/plugin-transform-arrow-functions",
    "@babel/plugin-transform-classes"
  ]
}
```

#### 3.2 Vercel ì„¤ì • ìµœì í™”
```json
// vercel.json - í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìƒì„±
{
  "version": 2,
  "buildCommand": "npm run build",
  "devCommand": "npm run dev",
  "outputDirectory": "public",
  "framework": null,
  "public": true,
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/api/$1"
    },
    {
      "src": "/(.*)",
      "dest": "/public/$1"
    }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=3600, s-maxage=86400, stale-while-revalidate"
        },
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        }
      ]
    },
    {
      "source": "/(.*).js",
      "headers": [
        {
          "key": "Content-Type",
          "value": "application/javascript; charset=utf-8"
        }
      ]
    },
    {
      "source": "/(.*).css",
      "headers": [
        {
          "key": "Content-Type",
          "value": "text/css; charset=utf-8"
        }
      ]
    }
  ],
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

```json
// package.json ìˆ˜ì • ì‚¬í•­
{
  "name": "mua-mvp-v3",
  "version": "3.0.0",
  "scripts": {
    "dev": "http-server ./public -p 3000",
    "build": "npm run build:js && npm run build:css && npm run copy:assets",
    "build:js": "babel public/js --out-dir public/dist/js",
    "build:css": "postcss public/css --dir public/dist/css",
    "copy:assets": "cp -r public/images public/dist/",
    "test": "jest",
    "lint": "eslint public/js"
  },
  "dependencies": {
    "xlsx": "^0.18.5",
    "pptxgenjs": "^3.12.0",
    "core-js": "^3.30.0"
  },
  "devDependencies": {
    "@babel/core": "^7.22.0",
    "@babel/preset-env": "^7.22.0",
    "@babel/cli": "^7.22.0",
    "postcss": "^8.4.24",
    "postcss-cli": "^10.1.0",
    "autoprefixer": "^10.4.14",
    "http-server": "^14.1.1",
    "eslint": "^8.42.0",
    "jest": "^29.5.0"
  }
}
```

### Phase 4: ì„±ëŠ¥ ìµœì í™” (Performance) - P3 ìš°ì„ ìˆœìœ„

#### 4.1 Web Workerë¥¼ í™œìš©í•œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬
```javascript
// worker.js - Web Worker íŒŒì¼
self.addEventListener('message', async function(e) {
  const { type, data } = e.data;
  
  switch(type) {
    case 'PROCESS_EXCEL':
      try {
        // XLSX ë¼ì´ë¸ŒëŸ¬ë¦¬ ë™ì  ë¡œë“œ
        importScripts('https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js');
        
        const workbook = XLSX.read(data, { type: 'array' });
        const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
        const jsonData = XLSX.utils.sheet_to_json(firstSheet);
        
        self.postMessage({
          type: 'EXCEL_PROCESSED',
          data: jsonData
        });
      } catch (error) {
        self.postMessage({
          type: 'ERROR',
          error: error.message
        });
      }
      break;
      
    case 'PROCESS_IMAGE':
      // ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• ë“± ë¬´ê±°ìš´ ì²˜ë¦¬
      const processedImage = await processImage(data);
      self.postMessage({
        type: 'IMAGE_PROCESSED',
        data: processedImage
      });
      break;
  }
});

async function processImage(imageData) {
  // ì´ë¯¸ì§€ ì²˜ë¦¬ ë¡œì§
  return imageData; // ì²˜ë¦¬ëœ ì´ë¯¸ì§€ ë°˜í™˜
}

// main.js - ë©”ì¸ ìŠ¤ë ˆë“œ
class WorkerManager {
  constructor() {
    this.worker = new Worker('worker.js');
    this.callbacks = new Map();
    this.messageId = 0;
    
    this.worker.addEventListener('message', (e) => {
      const { type, data, error, id } = e.data;
      if (this.callbacks.has(id)) {
        const callback = this.callbacks.get(id);
        if (error) {
          callback.reject(error);
        } else {
          callback.resolve(data);
        }
        this.callbacks.delete(id);
      }
    });
  }
  
  async processExcel(fileData) {
    return this.sendMessage('PROCESS_EXCEL', fileData);
  }
  
  async processImage(imageData) {
    return this.sendMessage('PROCESS_IMAGE', imageData);
  }
  
  sendMessage(type, data) {
    return new Promise((resolve, reject) => {
      const id = this.messageId++;
      this.callbacks.set(id, { resolve, reject });
      this.worker.postMessage({ type, data, id });
    });
  }
  
  terminate() {
    this.worker.terminate();
  }
}
```

#### 4.2 ì´ë¯¸ì§€ Lazy Loading ë° ìµœì í™”
```javascript
// ì´ë¯¸ì§€ ì§€ì—° ë¡œë”© êµ¬í˜„
class ImageLazyLoader {
  constructor() {
    this.imageObserver = null;
    this.init();
  }
  
  init() {
    // Intersection Observer ì„¤ì •
    const options = {
      root: null,
      rootMargin: '50px',
      threshold: 0.01
    };
    
    this.imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          this.loadImage(entry.target);
          observer.unobserve(entry.target);
        }
      });
    }, options);
    
    // ëª¨ë“  lazy-load ì´ë¯¸ì§€ ê´€ì°° ì‹œì‘
    document.querySelectorAll('img[data-lazy]').forEach(img => {
      this.imageObserver.observe(img);
    });
  }
  
  loadImage(img) {
    const src = img.dataset.lazy;
    
    // ìƒˆ ì´ë¯¸ì§€ ê°ì²´ë¡œ ë¯¸ë¦¬ ë¡œë“œ
    const tempImg = new Image();
    tempImg.onload = () => {
      img.src = src;
      img.classList.add('loaded');
      delete img.dataset.lazy;
    };
    tempImg.onerror = () => {
      img.classList.add('error');
      console.error('Failed to load image:', src);
    };
    tempImg.src = src;
  }
  
  // ìˆ˜ë™ìœ¼ë¡œ ì´ë¯¸ì§€ ë¡œë“œ (ìŠ¤í¬ë¡¤ ì—†ì´)
  loadAllImages() {
    document.querySelectorAll('img[data-lazy]').forEach(img => {
      this.loadImage(img);
    });
  }
  
  destroy() {
    if (this.imageObserver) {
      this.imageObserver.disconnect();
    }
  }
}

// ì´ë¯¸ì§€ ì••ì¶• ë° ìµœì í™”
class ImageOptimizer {
  constructor(options = {}) {
    this.maxWidth = options.maxWidth || 1920;
    this.maxHeight = options.maxHeight || 1080;
    this.quality = options.quality || 0.8;
  }
  
  async optimizeImage(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      
      reader.onload = (e) => {
        const img = new Image();
        
        img.onload = () => {
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          
          // ë¦¬ì‚¬ì´ì§• ê³„ì‚°
          let { width, height } = this.calculateDimensions(
            img.width,
            img.height
          );
          
          canvas.width = width;
          canvas.height = height;
          
          // ì´ë¯¸ì§€ ê·¸ë¦¬ê¸°
          ctx.drawImage(img, 0, 0, width, height);
          
          // Blobìœ¼ë¡œ ë³€í™˜
          canvas.toBlob(
            (blob) => {
              resolve({
                blob,
                width,
                height,
                originalSize: file.size,
                optimizedSize: blob.size,
                compressionRatio: (blob.size / file.size * 100).toFixed(2) + '%'
              });
            },
            'image/jpeg',
            this.quality
          );
        };
        
        img.onerror = reject;
        img.src = e.target.result;
      };
      
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }
  
  calculateDimensions(originalWidth, originalHeight) {
    let width = originalWidth;
    let height = originalHeight;
    
    // ìµœëŒ€ í¬ê¸° ì´ˆê³¼ ì‹œ ë¹„ìœ¨ ìœ ì§€í•˜ë©° ì¶•ì†Œ
    if (width > this.maxWidth) {
      height = (this.maxWidth / width) * height;
      width = this.maxWidth;
    }
    
    if (height > this.maxHeight) {
      width = (this.maxHeight / height) * width;
      height = this.maxHeight;
    }
    
    return { width: Math.round(width), height: Math.round(height) };
  }
}
```

#### 4.3 requestAnimationFrame ìµœì í™”
```javascript
// setTimeout ëŒ€ì‹  requestAnimationFrame ì‚¬ìš©
class AnimationManager {
  constructor() {
    this.animations = new Map();
    this.running = false;
  }
  
  register(id, callback) {
    this.animations.set(id, callback);
    if (!this.running) {
      this.start();
    }
  }
  
  unregister(id) {
    this.animations.delete(id);
    if (this.animations.size === 0) {
      this.stop();
    }
  }
  
  start() {
    this.running = true;
    this.animate();
  }
  
  stop() {
    this.running = false;
  }
  
  animate() {
    if (!this.running) return;
    
    this.animations.forEach(callback => {
      callback();
    });
    
    requestAnimationFrame(() => this.animate());
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
const animationManager = new AnimationManager();

// ë“œë˜ê·¸ ì¤‘ ìš”ì†Œ ì´ë™
function handleDrag(e) {
  animationManager.register('drag', () => {
    element.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
  });
}

function handleDragEnd() {
  animationManager.unregister('drag');
}
```

## ğŸš€ êµ¬í˜„ ìš°ì„ ìˆœìœ„ ë° ì¼ì •

### ì¦‰ì‹œ ìˆ˜ì • (1-2ì¼)
1. **P0-1**: ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìˆ˜ì •
2. **P0-2**: íŒŒì¼ ì—…ë¡œë“œ ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€
3. **P0-3**: localStorage ìë™ ì €ì¥ êµ¬í˜„

### 1ì£¼ì°¨ ìˆ˜ì •
4. **P1-1**: ë°˜ì‘í˜• ì¢Œí‘œ ì‹œìŠ¤í…œ êµ¬í˜„
5. **P1-2**: ì¤‘ì•™ì§‘ì¤‘ì‹ ìƒíƒœ ê´€ë¦¬ ë„ì…
6. **P1-3**: Vercel ì„¤ì • íŒŒì¼ ì¶”ê°€

### 2ì£¼ì°¨ ìˆ˜ì •
7. **P2-1**: Polyfill ë° ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
8. **P2-2**: Web Worker ë„ì…
9. **P2-3**: ì´ë¯¸ì§€ ìµœì í™” ë° Lazy Loading

### 3ì£¼ì°¨ ì´í›„
10. **P3-1**: ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§ ë° ìµœì í™”
11. **P3-2**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€
12. **P3-3**: PPT ìƒì„± ê¸°ëŠ¥ êµ¬í˜„

## ğŸ“ Claude Code ì‹¤í–‰ ì§€ì¹¨

### ë‹¨ê³„ë³„ ìˆ˜ì • ëª…ë ¹ì–´

```bash
# 1. í”„ë¡œì íŠ¸ í´ë¡  ë° ì˜ì¡´ì„± ì„¤ì¹˜
git clone https://github.com/dkdla93/mua_mvp_v3.0.git
cd mua_mvp_v3.0
npm install

# 2. ê¸´ê¸‰ ìˆ˜ì •ì‚¬í•­ ì ìš©
# EventManager í´ë˜ìŠ¤ë¥¼ public/js/utils/event-manager.jsì— ìƒì„±
# StateManager í´ë˜ìŠ¤ë¥¼ public/js/utils/state-manager.jsì— ìƒì„±
# ë©”ì¸ íŒŒì¼ë“¤ì— import ë° ì ìš©

# 3. Vercel ì„¤ì • íŒŒì¼ ìƒì„±
# vercel.json íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìƒì„±

# 4. Babel ì„¤ì • ë° ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€
# babel.config.json ìƒì„±
# package.json scripts ì„¹ì…˜ ì—…ë°ì´íŠ¸

# 5. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run dev
# ë¸Œë¼ìš°ì €ì—ì„œ localhost:3000 í™•ì¸

# 6. Vercel ë°°í¬
vercel --prod
```

### íŒŒì¼ êµ¬ì¡° ì œì•ˆ
```
mua_mvp_v3.0/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ styles.css
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ main.js
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ event-manager.js
â”‚   â”‚   â”‚   â”œâ”€â”€ state-manager.js
â”‚   â”‚   â”‚   â”œâ”€â”€ coordinate-system.js
â”‚   â”‚   â”‚   â””â”€â”€ file-processor.js
â”‚   â”‚   â”œâ”€â”€ workers/
â”‚   â”‚   â”‚   â””â”€â”€ file-worker.js
â”‚   â”‚   â””â”€â”€ polyfills/
â”‚   â”‚       â””â”€â”€ polyfills.js
â”‚   â””â”€â”€ images/
â”œâ”€â”€ src/  (ê°œë°œ ì†ŒìŠ¤, Babel íŠ¸ëœìŠ¤íŒŒì¼ ì „)
â”œâ”€â”€ dist/ (ë¹Œë“œëœ íŒŒì¼)
â”œâ”€â”€ tests/
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ babel.config.json
â”œâ”€â”€ vercel.json
â””â”€â”€ README.md
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë°±ì—… í•„ìˆ˜**: ëª¨ë“  ìˆ˜ì • ì „ í˜„ì¬ ì½”ë“œ ë°±ì—…
2. **ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸**: ê° ìˆ˜ì • í›„ ì² ì €í•œ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
3. **ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸**: Chrome, Firefox, Safari, Edgeì—ì„œ í…ŒìŠ¤íŠ¸
4. **ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸**: ë°˜ì‘í˜• ë””ìì¸ í™•ì¸
5. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: Chrome DevTools Performance íƒ­ í™œìš©

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

ìˆ˜ì • ì™„ë£Œ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ê°œì„ ì´ ì˜ˆìƒë©ë‹ˆë‹¤:

- **ì„±ëŠ¥**: 50% ì´ìƒ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°ì†Œ
- **ì•ˆì •ì„±**: ì˜¤ë¥˜ ë°œìƒë¥  90% ê°ì†Œ
- **í˜¸í™˜ì„±**: 95% ì´ìƒ ë¸Œë¼ìš°ì € ì§€ì›
- **ì‚¬ìš©ì„±**: ìƒíƒœ ìœ ì§€ë¡œ ì¸í•œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- **í™•ì¥ì„±**: í–¥í›„ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´

## ğŸ”„ ì¶”ê°€ ê°œì„  ì œì•ˆ

### í–¥í›„ ê³ ë ¤ì‚¬í•­
1. **TypeScript ë„ì…**: íƒ€ì… ì•ˆì •ì„± í™•ë³´
2. **React/Vue ë§ˆì´ê·¸ë ˆì´ì…˜**: ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜
3. **PWA ì§€ì›**: ì˜¤í”„ë¼ì¸ ê¸°ëŠ¥ ì¶”ê°€
4. **CI/CD íŒŒì´í”„ë¼ì¸**: GitHub Actions í™œìš©
5. **ëª¨ë‹ˆí„°ë§**: Sentry ë“± ì—ëŸ¬ íŠ¸ë˜í‚¹ ë„êµ¬ ë„ì…

ì´ ë¬¸ì„œë¥¼ Claude Codeì— ì „ë‹¬í•˜ì—¬ ì²´ê³„ì ìœ¼ë¡œ ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.